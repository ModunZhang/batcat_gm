{% extends '../../layouts/service.html' %}

{% block content %}
<table class="table table-striped table-bordered table-hover">
    <tr>
        <td><strong>ID</strong></td>
        <td>{{player._id}}</td>
    </tr>
    <tr>
        <td><strong>名称</strong></td>
        <td>{{player.basicInfo.name}}</td>
    </tr>
    <tr>
        <td><strong>状态</strong></td>
        <td>{% if !!player.logicServerId %}在线{% else %}离线{% endif %}</td>
    </tr>
    <tr>
        <td><strong>服务器ID</strong></td>
        <td>{{player.serverId}}</td>
    </tr>
    <tr>
        <td><strong>到期锁定时间</strong></td>
        <td>
            {% if player.countInfo.lockTime - Date.now() > 0 %} {{player.countInfo.lockTime|date('Y-m-d H:i:s')}}
            {% else %} 未锁定 {% endif %}
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <div class="row">
                <div class="col-sm-6">
                    <form action="/service/player/ban" method="post" role="form" id="ban">
                        <input type="hidden" name="_csrf" value="{{csrf_token}}">
                        <input type="hidden" name="playerId" value="{{player._id}}">
                        <input type="hidden" name="serverId" value="{{player.serverId}}">
                        <div class="row">
                            <div class="col-sm-4">
                                <select name="time" id="time" class="form-control">
                                    <option value="30">30分钟</option>
                                    <option value="60">1小时</option>
                                    <option value="360">6小时</option>
                                    <option value="1440">24小时</option>
                                    <option value="525600">一年</option>
                                </select>
                            </div>
                            <div class="col-sm-6">
                                <button class="btn btn-primary" type="submit">锁定</button>
                            </div>
                        </div>
                    </form>
                </div>
                {% if player.countInfo.lockTime - Date.now() > 0 %}
                <div class="col-sm-6">
                    <form action="/service/player/ban" method="post" role="form" id="unban">
                        <input type="hidden" name="_csrf" value="{{csrf_token}}">
                        <input type="hidden" name="playerId" value="{{player._id}}">
                        <input type="hidden" name="serverId" value="{{player.serverId}}">
                        <input type="hidden" name="time" value="0">
                        <button class="btn btn-primary" type="submit">解锁</button>
                    </form>
                </div>
                {% endif %}
            </div>
        </td>
    </tr>
</table>
{% endblock %}
